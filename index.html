<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yaqinimga ‚ù§Ô∏è</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"> 
  <style>
    :root {
      --primary: #ff6b6b;
      --secondary: #4ecdc4;
      --accent: #45b7d1;
      --dark: #2c3e50;
      --light: #ecf0f1;
      --white: #ffffff;
      --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --gradient-2: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
      --gradient-3: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
      --shadow-light: 0 8px 32px rgba(0, 0, 0, 0.1);
      --shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.2);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--gradient-1);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--dark);
      line-height: 1.6;
      overflow-x: hidden;
      position: relative;
    }

    /* Floating particles */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }

    .container {
      width: 90%;
      max-width: 500px;
      text-align: center;
      padding: 3rem 2.5rem;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 25px;
      box-shadow: var(--shadow-heavy);
      border: 1px solid rgba(255, 255, 255, 0.2);
      position: relative;
      z-index: 10;
      transform: translateY(0);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .container:hover {
      transform: translateY(-10px);
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.25);
    }

    h1 {
      font-family: 'Dancing Script', cursive;
      background: var(--gradient-2);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 2.5rem;
      font-size: 3.5rem;
      font-weight: 700;
      position: relative;
      animation: titleGlow 3s ease-in-out infinite alternate;
    }

    @keyframes titleGlow {
      from { filter: drop-shadow(0 0 10px rgba(255, 107, 107, 0.3)); }
      to { filter: drop-shadow(0 0 20px rgba(255, 107, 107, 0.6)); }
    }

    .envelope {
      position: relative;
      width: 220px;
      height: 140px;
      background: var(--gradient-2);
      margin: 0 auto 2.5rem;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--shadow-light);
      overflow: hidden;
    }

    .envelope::after {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: var(--gradient-2);
      border-radius: 14px;
      z-index: -1;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .envelope:hover {
      transform: translateY(-8px) scale(1.05);
      box-shadow: var(--shadow-heavy);
    }

    .envelope:hover::after {
      opacity: 1;
      animation: borderGlow 2s linear infinite;
    }

    @keyframes borderGlow {
      0% { filter: blur(5px); }
      50% { filter: blur(10px); }
      100% { filter: blur(5px); }
    }

    .envelope:before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      width: 0;
      height: 0;
      border-left: 110px solid transparent;
      border-right: 110px solid transparent;
      border-top: 80px solid #ff5252;
      transform-origin: top;
      transform: translateX(-50%) rotateX(0deg);
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 3;
    }

    .envelope.open:before {
      transform: translateX(-50%) rotateX(180deg);
    }

    .heart {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 45px;
      height: 45px;
      background: var(--white);
      z-index: 2;
      animation: heartBeat 2s ease-in-out infinite;
    }

    .heart:before,
    .heart:after {
      content: '';
      position: absolute;
      top: 0;
      width: 45px;
      height: 45px;
      background: var(--white);
      border-radius: 50%;
    }

    .heart:before {
      left: -22px;
    }

    .heart:after {
      top: -22px;
    }

    @keyframes heartBeat {
      0%, 50%, 100% { transform: translate(-50%, -50%) scale(1); }
      25%, 75% { transform: translate(-50%, -50%) scale(1.1); }
    }

    #message {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      padding: 0;
      border-radius: 20px;
      margin-top: 1rem;
      text-align: left;
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.05);
      border: 2px solid rgba(255, 107, 107, 0.2);
      opacity: 0;
      height: 0;
      overflow: hidden;
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      transform: translateY(-20px);
    }

    #message.show {
      opacity: 1;
      height: auto;
      padding: 2.5rem;
      margin-top: 2rem;
      transform: translateY(0);
    }

    #message p {
      margin-bottom: 1.2rem;
      font-size: 1.1rem;
      font-weight: 400;
      line-height: 1.7;
      animation: fadeInUp 0.8s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    #message.show p:nth-child(1) { animation-delay: 0.2s; }
    #message.show p:nth-child(2) { animation-delay: 0.4s; }
    #message.show p:nth-child(3) { animation-delay: 0.6s; }
    #message.show .signature { animation-delay: 0.8s; }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .signature {
      font-family: 'Dancing Script', cursive;
      font-size: 1.8rem;
      text-align: right;
      background: var(--gradient-2);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-top: 1.5rem;
      font-weight: 700;
    }

    .buttons {
      margin-top: 2.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }

    button {
      background: var(--gradient-2);
      color: var(--white);
      border: none;
      padding: 1rem 2rem;
      border-radius: 50px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--shadow-light);
      position: relative;
      overflow: hidden;
      font-family: inherit;
    }

    button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.6s ease;
    }

    button:hover::before {
      left: 100%;
    }

    button:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: var(--shadow-heavy);
    }

    button:active {
      transform: translateY(-1px) scale(0.98);
    }

    #happyBtn {
      background: var(--gradient-3);
    }

    #closeBtn {
      background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
    }

    /* Gift page styles */
    .gift-page {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gradient-1);
      z-index: 1000;
      overflow-y: auto;
      padding: 20px;
    }

    .gift-page.show {
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .gift-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 25px;
      padding: 3rem 2.5rem;
      box-shadow: var(--shadow-heavy);
      border: 1px solid rgba(255, 255, 255, 0.2);
      max-width: 480px;
      width: 100%;
      text-align: center;
      animation: scaleIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes scaleIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .gift-icon {
      font-size: 4.5rem;
      margin-bottom: 1.5rem;
      animation: bounce 2s infinite;
      filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-15px); }
      60% { transform: translateY(-7px); }
    }

    .gift-container h1 {
      color: var(--dark);
      font-size: 2.2rem;
      margin-bottom: 0.5rem;
      font-weight: 700;
      font-family: 'Inter', sans-serif;
    }

    .subtitle {
      color: #7f8c8d;
      font-size: 1.1rem;
      margin-bottom: 2rem;
      line-height: 1.5;
      font-weight: 400;
    }

    .form-group {
      margin-bottom: 1.5rem;
      text-align: left;
    }

    .form-group label {
      display: block;
      color: var(--dark);
      font-weight: 600;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }

    .gift-container input, 
    .gift-container textarea {
      width: 100%;
      padding: 1rem 1.5rem;
      border: 2px solid rgba(0, 0, 0, 0.1);
      border-radius: 15px;
      font-size: 1rem;
      font-family: inherit;
      background: rgba(255, 255, 255, 0.8);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      outline: none;
      font-weight: 400;
    }

    .gift-container input:focus, 
    .gift-container textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
      background: var(--white);
      transform: translateY(-2px);
    }

    .gift-container textarea {
      resize: vertical;
      min-height: 120px;
      max-height: 180px;
    }

    .submit-btn {
      background: var(--gradient-2);
      color: var(--white);
      border: none;
      padding: 1.2rem 2.5rem;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--shadow-light);
      width: 100%;
      margin-top: 1rem;
      position: relative;
      overflow: hidden;
    }

    .submit-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.6s ease;
    }

    .submit-btn:hover::before {
      left: 100%;
    }

    .submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-heavy);
    }

    .social-links {
      margin-top: 2.5rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
    }

    .social-links h3 {
      color: var(--dark);
      margin-bottom: 1.5rem;
      font-size: 1.2rem;
      font-weight: 600;
    }

    .social-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .social-links a {
      display: inline-block;
      padding: 0.8rem 1.2rem;
      background: var(--gradient-3);
      color: var(--white);
      text-decoration: none;
      border-radius: 12px;
      font-size: 0.9rem;
      font-weight: 500;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .social-links a:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .phone-links {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .phone-links a {
      background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
      font-size: 0.85rem;
    }

    .back-btn {
      position: absolute;
      top: 30px;
      right: 30px;
      background: rgba(255, 255, 255, 0.2);
      color: var(--white);
      border: none;
      padding: 12px 15px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .back-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    /* Chat page styles */
    .chat-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 25px;
      box-shadow: var(--shadow-heavy);
      border: 1px solid rgba(255, 255, 255, 0.2);
      max-width: 500px;
      width: 100%;
      height: 80vh;
      max-height: 600px;
      display: flex;
      flex-direction: column;
      animation: scaleIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
    }

    .chat-header {
      padding: 1.5rem 2rem;
      background: var(--gradient-2);
      color: white;
      display: flex;
      align-items: center;
      gap: 1rem;
      border-radius: 25px 25px 0 0;
    }

    .ai-avatar {
      font-size: 2.5rem;
      width: 50px;
      height: 50px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .ai-info h3 {
      margin: 0;
      font-size: 1.3rem;
      font-weight: 600;
    }

    .ai-status {
      font-size: 0.9rem;
      opacity: 0.9;
      font-weight: 400;
    }

    .chat-messages {
      flex: 1;
      padding: 1.5rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      background: rgba(248, 250, 252, 0.5);
    }

    .message {
      display: flex;
      gap: 0.8rem;
      animation: slideInMessage 0.4s ease-out;
    }

    @keyframes slideInMessage {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .message-avatar {
      font-size: 1.8rem;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .ai-message .message-avatar {
      background: var(--gradient-2);
    }

    .user-message {
      flex-direction: row-reverse;
    }

    .user-message .message-avatar {
      background: var(--gradient-3);
    }

    .message-content {
      background: white;
      padding: 1rem 1.2rem;
      border-radius: 18px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      max-width: 75%;
      border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .user-message .message-content {
      background: var(--gradient-3);
      color: white;
    }

    .message-content p {
      margin: 0;
      line-height: 1.5;
      font-size: 0.95rem;
    }

    .message-content p + p {
      margin-top: 0.5rem;
    }

    .chat-input-container {
      padding: 1.5rem;
      background: white;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    #chatInput {
      flex: 1;
      padding: 1rem 1.2rem;
      border: 2px solid rgba(0, 0, 0, 0.1);
      border-radius: 25px;
      font-size: 1rem;
      outline: none;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    #chatInput:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
    }

    #sendBtn {
      background: var(--gradient-2);
      color: white;
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.2rem;
      box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
    }

    #sendBtn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
    }

    #sendBtn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .quick-questions {
      padding: 1rem 1.5rem 1.5rem;
      background: white;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      border-top: 1px solid rgba(0, 0, 0, 0.05);
    }

    .quick-btn {
      background: rgba(102, 126, 234, 0.1);
      color: var(--dark);
      border: 1px solid rgba(102, 126, 234, 0.2);
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .quick-btn:hover {
      background: var(--gradient-1);
      color: white;
      transform: translateY(-2px);
    }

    .typing-indicator {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-style: italic;
      color: #666;
      margin: 0.5rem 0;
    }

    .typing-dots {
      display: flex;
      gap: 0.3rem;
    }

    .typing-dots span {
      width: 8px;
      height: 8px;
      background: #666;
      border-radius: 50%;
      animation: typingDots 1.4s infinite;
    }

    .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
    .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typingDots {
      0%, 60%, 100% { transform: scale(1); opacity: 0.5; }
      30% { transform: scale(1.2); opacity: 1; }
    }

    /* Mobile responsive */
    @media (max-width: 480px) {
      .container {
        margin: 20px 10px;
        padding: 2rem 1.5rem;
      }
      
      h1 {
        font-size: 2.8rem;
      }
      
      .envelope {
        width: 180px;
        height: 115px;
      }
      
      .envelope:before {
        border-left: 90px solid transparent;
        border-right: 90px solid transparent;
        border-top: 65px solid #ff5252;
      }
      
      .gift-container {
        margin: 10px;
        padding: 2rem 1.5rem;
      }
      
      .gift-container h1 {
        font-size: 1.8rem;
      }
      
      .gift-icon {
        font-size: 3.5rem;
      }
      
      .social-grid {
        grid-template-columns: 1fr;
      }

      .back-btn {
        top: 20px;
        right: 20px;
        padding: 10px 12px;
      }
    }
  </style>
</head>
<body>
  <!-- Floating particles -->
  <div class="particles" id="particles"></div>

  <div class="container">
    <h1>Yaqinimga</h1>
    <div class="envelope" id="envelope">
      <div class="heart"></div>
    </div>
    <div id="message">
      <p>Salom! Bu mening premium websahifam. </p>
      <p>Ishlaringiz qanday? Bugun sizni eslab qoldim va maxsus xabar yozishga qaror qildim.</p>
      <p>O'qib bo'lgach javob yozsangiz juda xursand bo'laman! üòä</p>
      <p class="signature">‚Äî Javohir </p>
    </div>
    <div class="buttons">
      <button id="openBtn">‚úâÔ∏è Xatni ochish</button>
      <button id="closeBtn" style="display:none;">üì´ Xatni yopish</button>
      <button id="happyBtn">üéÅ Maxsus sovg'a olish</button>
    </div>
  </div>

  <!-- Chat page -->
  <div id="chatPage" class="gift-page">
    <button class="back-btn" id="chatBackBtn">‚úï</button>
    <div class="chat-container">
      <div class="chat-header">
        <div class="ai-avatar">ü§ñ</div>
        <div class="ai-info">
          <h3>Yara AI</h3>
          <span class="ai-status">Online va friendly üíï</span>
        </div>
      </div>
      
      <div class="chat-messages" id="chatMessages">
        <div class="message ai-message">
          <div class="message-avatar">ü§ñ</div>
          <div class="message-content">
            <p>Salom! Men Yara - sizning friendly AI do'stingiz! üòä</p>
            <p>Siz bilan suhbat qilishga juda xursandman. Nima haqida gaplashmoqchisiz?</p>
          </div>
        </div>
      </div>
      
      <div class="chat-input-container">
        <input type="text" id="chatInput" placeholder="Xabaringizni yozing..." maxlength="200">
        <button id="sendBtn" type="button">
          <span>üì§</span>
        </button>
      </div>
      
      <div class="quick-questions">
        <button class="quick-btn" data-msg="Salom, qandaysiz?">üëã Salom</button>
        <button class="quick-btn" data-msg="Bugun kayfiyatim yaxshi">üòä Kayfiyat</button>
        <button class="quick-btn" data-msg="Menga maslahat bering">üí° Maslahat</button>
        <button class="quick-btn" data-msg="Qiziqarli narsa ayting">‚ú® Qiziq</button>
      </div>
    </div>
  </div>

  <!-- Gift page -->
  <div id="giftPage" class="gift-page">
    <button class="back-btn" id="backBtn">‚úï</button>
    <div class="gift-container">
      <div class="gift-icon">üéÅ</div>
      <h1>Maxsus Taklifnoma</h1>
      <p class="subtitle">Ismingizni kiriting va website haqida fikringizni bildiring</p>

      <form action="https://formspree.io/f/xnnzwzbr" method="POST" id="giftForm">
        <div class="form-group">
          <label for="ism">‚ú® Ismingiz *</label>
          <input type="text" id="ism" name="ism" placeholder="To'liq ismingizni kiriting" required>
        </div>
        
        <div class="form-group">
          <label for="fikr">üí≠ Website haqida fikringiz</label>
          <textarea id="fikr" name="fikr" placeholder="Bu website haqida fikr-mulohazalaringizni yozing... (ixtiyoriy)"></textarea>
        </div>
        
        <button type="submit" class="submit-btn">‚ú® Yuborish</button>
      </form>

      <div class="social-links">
        <h3>üìû Bog'lanish uchun</h3>
        
        <div class="social-grid">
          <a href="https://t.me/javohir206" target="_blank">üì± Telegram</a>
          <a href="https://instagram.com/javohir_0688" target="_blank">üì∏ Instagram</a>
        </div>
        
        <div class="phone-links">
          <a href="tel:+998777378806">‚òéÔ∏è +998 77 737 88 06</a>
          <a href="tel:+998931700688">‚òéÔ∏è +998 93 170 06 88</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    // DOM elements
    const envelope = document.getElementById('envelope');
    const message = document.getElementById('message');
    const openBtn = document.getElementById('openBtn');
    const closeBtn = document.getElementById('closeBtn');
    const chatBtn = document.getElementById('chatBtn');
    const happyBtn = document.getElementById('happyBtn');
    const giftPage = document.getElementById('giftPage');
    const chatPage = document.getElementById('chatPage');
    const backBtn = document.getElementById('backBtn');
    const chatBackBtn = document.getElementById('chatBackBtn');
    const giftForm = document.getElementById('giftForm');
    const particlesContainer = document.getElementById('particles');
    
    // Chat elements
    const chatMessages = document.getElementById('chatMessages');
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const quickBtns = document.querySelectorAll('.quick-btn');

    // Create floating particles
    function createParticles() {
      for (let i = 0; i < 15; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        
        // Random size and position
        const size = Math.random() * 8 + 4;
        particle.style.width = size + 'px';
        particle.style.height = size + 'px';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        
        // Random animation delay and duration
        particle.style.animationDelay = Math.random() * 6 + 's';
        particle.style.animationDuration = (Math.random() * 3 + 4) + 's';
        
        particlesContainer.appendChild(particle);
      }
    }

    // Initialize particles
    createParticles();

    // Envelope interactions with smooth animations
    openBtn.addEventListener('click', () => {
      envelope.classList.add('open');
      message.classList.add('show');
      
      setTimeout(() => {
        openBtn.style.display = 'none';
        closeBtn.style.display = 'inline-block';
      }, 300);
    });

    closeBtn.addEventListener('click', () => {
      envelope.classList.remove('open');
      message.classList.remove('show');
      
      setTimeout(() => {
        closeBtn.style.display = 'none';
        openBtn.style.display = 'inline-block';
      }, 300);
    });

    // Gift page interactions
    happyBtn.addEventListener('click', () => {
      giftPage.classList.add('show');
      document.body.style.overflow = 'hidden';
    });

    // Chat page interactions
    chatBtn.addEventListener('click', () => {
      chatPage.classList.add('show');
      document.body.style.overflow = 'hidden';
      chatInput.focus();
    });

    backBtn.addEventListener('click', () => {
      giftPage.classList.remove('show');
      document.body.style.overflow = 'auto';
    });

    chatBackBtn.addEventListener('click', () => {
      chatPage.classList.remove('show');
      document.body.style.overflow = 'auto';
    });

    // Form submission with enhanced UX
    giftForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(giftForm);
      const submitBtn = giftForm.querySelector('.submit-btn');
      
      // Button state management
      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '‚è≥ Yuborilmoqda...';
      submitBtn.disabled = true;
      submitBtn.style.opacity = '0.7';
      
      try {
        await fetch("https://formspree.io/f/xgvzdzay", {
          method: "POST",
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });
        
        // Success feedback
        submitBtn.innerHTML = '‚úÖ Yuborildi!';
        submitBtn.style.background = 'linear-gradient(135deg, #2ecc71, #27ae60)';
        
        setTimeout(() => {
          alert("Rahmat! Sizning xabaringiz qabul qilindi üéÅ‚ú®");
          giftForm.reset();
          giftPage.classList.remove('show');
          document.body.style.overflow = 'auto';
        }, 1000);
        
      } catch (error) {
        submitBtn.innerHTML = '‚ùå Xatolik';
        submitBtn.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
        
        setTimeout(() => {
          alert("Xatolik yuz berdi. Iltimos, qayta urinib ko'ring.");
        }, 1000);
      } finally {
        setTimeout(() => {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
          submitBtn.style.opacity = '1';
          submitBtn.style.background = '';
        }, 2000);
      }
    });

    // Enhanced keyboard interactions
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (giftPage.classList.contains('show')) {
          giftPage.classList.remove('show');
          document.body.style.overflow = 'auto';
        }
        if (chatPage.classList.contains('show')) {
          chatPage.classList.remove('show');
          document.body.style.overflow = 'auto';
        }
      }
      
      // Easter egg: Space to open/close envelope
      if (e.key === ' ' && !giftPage.classList.contains('show') && !chatPage.classList.contains('show')) {
        e.preventDefault();
        if (envelope.classList.contains('open')) {
          closeBtn.click();
        } else {
          openBtn.click();
        }
      }
    });

    // Add smooth scroll behavior
    document.documentElement.style.scrollBehavior = 'smooth';

    // Enhanced hover effects for buttons
    const buttons = document.querySelectorAll('button');
    buttons.forEach(button => {
      button.addEventListener('mouseenter', () => {
        button.style.transform = 'translateY(-3px) scale(1.02)';
      });
      
      button.addEventListener('mouseleave', () => {
        button.style.transform = '';
      });
    });

    // AI Chatbot Logic - Free & Smart!
    const aiResponses = {
      greetings: [
        "Salom! Qandaysiz bugun? üòä",
        "Assalomu alaykum! Kayfiyatingiz qanday? üíï",
        "Salom azizim! Nimalar qilyapsiz? ‚ú®",
        "Yaxshimisiz? Men sizni ko'rib juda xursandman! üåü"
      ],
      
      mood: [
        "Kayfiyatingiz yaxshi ekaniga juda xursandman! üòä",
        "Ajoyib! Yaxshi kayfiyat - hayotning eng yaxshi sovg'asi! ‚ú®",
        "Bu juda zo'r! Sizning ijobiy energiyangiz menga ham ta'sir qildi! üí´",
        "Kayfiyatingiz yomon bo'lsa, menga ayting - gaplashamiz! ü§ó"
      ],
      
      advice: [
        "Eng yaxshi maslahat: doimo o'zingizga ishoning! üí™",
        "Har qanday qiyinchilik vaqtinchalik. Siz kuchlisiz! üåü",
        "Kichik qadamlar ham manzilga olib boradi. Davom eting! üöÄ",
        "O'zingizni sevishni o'rganing - bu eng muhim narsa! üíï"
      ],
      
      interesting: [
        "Bilasizmi, yurak 1 kunda 100,000 marta uradi! üíì",
        "Tabassum qilish 17 ta mushak ishlatadi, xafa bo'lish esa 43 ta! üòä",
        "Har bir kishi noyobdir - dunyoda sizning kabi yana biri yo'q! ‚ú®",
        "Sevgi aslida kimyoviy reaktsiya - dopamin va oksitosin hormoni! üíï"
      ],
      
      love: [
        "Sevgi - dunyodagi eng kuchli kuch! üíï",
        "Haqiqiy sevgi sabr va tushunish talab qiladi üíñ",
        "Sevgi bergan sari ko'payadi, ajoyib emasmi? ‚ú®",
        "Eng chiroyli his - kimnidir baxtli ko'rishdir! üòä"
      ],
      
      compliments: [
        "Siz juda yaxshi odamsiz! üåü",
        "Sizning yuzingizda chiroyli tabassum bor! üòä",
        "Siz boshqalarga yorug'lik kiritasiz! ‚ú®",
        "Dunyoni yaxshiroq qiladigan odamlardan birisiz! üí´"
      ],
      
      default: [
        "Qiziq fikr! Bu haqda ko'proq ayting? ü§î",
        "Tushundim. Sizning fikringiz menga yoqdi! üòä",
        "Bu juda qiziqarli! Men bu haqda o'ylab ko'raman üí≠",
        "Rahmat gap uchun! Yana nima demoqchisiz? ‚ú®",
        "Sizning fikringiz muhim. Davom eting! üåü"
      ],
      
      questions: [
        "Bugun eng yaxshi voqeangiz nima bo'ldi? üòä",
        "Orzuingizdagi ta'til qayerda o'tkazmoqchisiz? üèùÔ∏è",
        "Sizni qanday musiqa xursand qiladi? üéµ",
        "Eng sevimli taomingiz nima? üçï",
        "Qanday kitob o'qiyapsiz? üìö"
      ]
    };

    const userName = localStorage.getItem('chatUserName') || '';
    let conversationHistory = [];

    function getAIResponse(userMessage) {
      const msg = userMessage.toLowerCase();
      
      // Simple keyword matching for better responses
      if (msg.includes('salom') || msg.includes('assalom') || msg.includes('qanday')) {
        return getRandomResponse('greetings');
      }
      
      if (msg.includes('kayfiyat') || msg.includes('yaxshi') || msg.includes('ajoyib')) {
        return getRandomResponse('mood');
      }
      
      if (msg.includes('maslahat') || msg.includes('yordam') || msg.includes('nimaqilaman')) {
        return getRandomResponse('advice');
      }
      
      if (msg.includes('qiziq') || msg.includes('ajab') || msg.includes('bilasizmi')) {
        return getRandomResponse('interesting');
      }
      
      if (msg.includes('sevgi') || msg.includes('muhabbat') || msg.includes('yoqti')) {
        return getRandomResponse('love');
      }
      
      if (msg.includes('chiroyli') || msg.includes('yaxshi') || msg.includes('zo\'r')) {
        return getRandomResponse('compliments');
      }
      
      // Random questions to keep conversation going
      if (conversationHistory.length > 0 && Math.random() > 0.7) {
        return getRandomResponse('questions');
      }
      
      return getRandomResponse('default');
    }

    function getRandomResponse(category) {
      const responses = aiResponses[category];
      return responses[Math.floor(Math.random() * responses.length)];
    }

    function addMessage(content, isUser = false) {
      const messageDiv = document.createElement('div');
      messageDiv.classList.add('message');
      messageDiv.classList.add(isUser ? 'user-message' : 'ai-message');
      
      messageDiv.innerHTML = `
        <div class="message-avatar">${isUser ? 'üë§' : 'ü§ñ'}</div>
        <div class="message-content">
          <p>${content}</p>
        </div>
      `;
      
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      // Add to conversation history
      conversationHistory.push({
        content,
        isUser,
        timestamp: new Date()
      });
    }

    function showTypingIndicator() {
      const typingDiv = document.createElement('div');
      typingDiv.classList.add('message', 'ai-message', 'typing-indicator');
      typingDiv.id = 'typing';
      
      typingDiv.innerHTML = `
        <div class="message-avatar">ü§ñ</div>
        <div class="message-content">
          <div class="typing-dots">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      `;
      
      chatMessages.appendChild(typingDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function removeTypingIndicator() {
      const typing = document.getElementById('typing');
      if (typing) {
        typing.remove();
      }
    }

    function sendMessage() {
      const message = chatInput.value.trim();
      if (!message) return;
      
      // Add user message
      addMessage(message, true);
      chatInput.value = '';
      sendBtn.disabled = true;
      
      // Show typing indicator
      showTypingIndicator();
      
      // Simulate AI thinking time
      setTimeout(() => {
        removeTypingIndicator();
        
        // Get AI response
        const aiResponse = getAIResponse(message);
        addMessage(aiResponse);
        
        sendBtn.disabled = false;
        chatInput.focus();
      }, 1000 + Math.random() * 1500); // Random delay 1-2.5 seconds
    }

    // Chat event listeners
    sendBtn.addEventListener('click', sendMessage);
    
    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
    
    // Quick question buttons
    quickBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const msg = btn.getAttribute('data-msg');
        chatInput.value = msg;
        sendMessage();
      });
    });
  </script>
</body>
</html>
